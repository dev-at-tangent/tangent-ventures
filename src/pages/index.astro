---
import ReactComponent from "../components/ReactComponent";
import { contentfulClient } from "../lib/contentful";
import type { Endorsement } from "./endorsements.astro";
import type { PortfolioItem } from "./portfolio.astro";
import Layout from "../layout/Layout.astro";

const entries = await contentfulClient.getEntries<Endorsement>({
  content_type: "endorsement",
  order: ["fields.rank"],
});

const portfolioEntries = await contentfulClient.getEntries<PortfolioItem>({
  content_type: "portfolio",
  order: ["fields.rank"],
});

const featuredMediaEntries = await contentfulClient.getEntries({
  content_type: "landingPageFeaturedMedia",
});
---

<Layout>
  <ReactComponent
    endorsements={entries.items.splice(0, 4)}
    portfolioIcons={portfolioEntries.items}
    featuredMedia={featuredMediaEntries.items}
    client:only="react"
  />
</Layout>
